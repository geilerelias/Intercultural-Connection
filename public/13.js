(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{108:function(t,e,s){"use strict";s.r(e);var o={props:["response"],data:function(){var t=this;return{message:"",tokenFound:!1,item:{email:"",password:"",password_confirmation:"",token:""},valid:!0,emailRules:[function(t){return!!t||"E-mail es requerido"},function(t){return/.+@.+\..+/.test(t)||"E-mail invalido"}],show1:!1,show2:!1,passwordRules:[function(t){return!!t||"Requerido."},function(t){return t&&t.length>=4||"Mínimo 4 caracteres"}],passwordConfirmRules:[function(t){return!!t||"Requerido."},function(t){return t&&t.length>=4||"Mínimo 4 caracteres"},function(e){return e===t.item.password||"No coinciden."}],overlay:!1}},mounted:function(){this.verifyToken()},methods:{verifyToken:function(){var t=this,e=this.$route.params.id;console.log("token",e),this.overlay=!0,axios.get("/api/password/find/".concat(e)).then((function(e){201===e.data.status?(t.tokenFound=!0,t.item.email=e.data[0].email,t.item.token=e.data[0].token):(t.message=e.data.message,Swal.fire("Oops... 😮",e.data.message,"error")),t.overlay=!1})).catch((function(e){t.overlay=!1,console.log(e),console.log(e.response.data),console.log(e.response.data.message);var s=e.response.data.errors;for(var o in console.log(s),t.text="",s)t.text+=o+": "+s[o]+"\n ";console.log(t.text),t.text+=e.response.data.message,t.message=t.text,Swal.fire("Oops... 😮",t.text,"error")}))},validate:function(){this.$refs.form.validate()&&this.resetPassword()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetPassword:function(){var t=this;this.overlay=!0;var e=this.item;axios.post("/api/password/reset",e).then((function(e){Swal.fire(201===e.data.status?"!Buen trabajo! 😀":"Oops... 😮",e.data.message,201===e.data.status?"success":"error").then((function(s){201===e.data.status&&t.$router.push("/login")})),t.reset(),t.overlay=!1})).catch((function(e){t.overlay=!1,console.log(e),console.log(e.response.data),console.log(e.response.data.message);var s=e.response.data.errors;for(var o in console.log(s),t.text="",s)t.text+=o+": "+s[o]+"\n ";console.log(t.text),t.text+=e.response.data.message,Swal.fire("Oops... 😮",t.text,"error")}))}}},a=s(0),n=Object(a.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"inspire"}},[s("header-app-component"),t._v(" "),s("drawer-app-component"),t._v(" "),s("v-content",[s("v-container",{attrs:{fluid:""}},[s("v-layout",{attrs:{"align-start":"","justify-center":""}},[s("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[[s("v-card",{staticClass:"mt-5",staticStyle:{"border-radius":"0px!important"}},[s("v-toolbar",{attrs:{dark:"",flat:""}},[s("v-toolbar-title",[t._v("\n                                    Restablecimiento de contraseña\n                                ")]),t._v(" "),s("v-spacer")],1),t._v(" "),t.tokenFound?t._e():s("v-card-text",[s("v-list",[s("v-list-item",[s("v-list-item-avatar",{attrs:{color:"amber darken-4",size:"40"}},[s("v-icon",{attrs:{icon:"mdi-alert",color:"white"}},[t._v("\n                                                mdi-lock\n                                            ")])],1),t._v(" "),s("v-list-item-content",[t._v("\n                                            "+t._s(t.message)+"\n                                        ")]),t._v(" "),s("v-list-item-action",[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[s("v-btn",t._g({attrs:{icon:"",to:"/send-notification"}},o),[s("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("\n                                                            mdi-email-send-outline\n                                                        ")])],1)]}}],null,!1,908464472)},[t._v(" "),s("span",[t._v("Reenviar email")])])],1)],1)],1)],1),t._v(" "),t.tokenFound?s("v-card-text",[s("v-form",{ref:"form",staticClass:"pa-5",attrs:{valid:"true","lazy-validation":!1},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._v("\n                                    ingresa la nueva contraseña y su\n                                    confirmación para actualizar\n                                    "),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:t.passwordRules,type:t.show1?"text":"password",label:"Password",hint:"Al menos 4 carácteres",counter:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.item.password,callback:function(e){t.$set(t.item,"password",e)},expression:"item.password"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-text-field",{attrs:{"append-icon":t.show2?"mdi-eye":"mdi-eye-off",rules:t.passwordConfirmRules,type:t.show2?"text":"password",label:"Confirmar password",hint:"Al menos 4 carácteres",counter:""},on:{"click:append":function(e){t.show2=!t.show2}},model:{value:t.item.password_confirmation,callback:function(e){t.$set(t.item,"password_confirmation",e)},expression:"\n                                                    item.password_confirmation\n                                                "}})],1)],1)],1)],1):t._e(),t._v(" "),t.tokenFound?s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n                                    Limpiar\n                                ")]),t._v(" "),s("v-btn",{staticClass:"white--text",attrs:{disabled:!t.valid,color:"#212121"},on:{click:t.validate}},[t._v("\n                                    Continuar\n                                ")])],1):t._e()],1)]],2)],1)],1)],1),t._v(" "),s("div",{staticClass:"text-center"},[s("v-overlay",{attrs:{absolute:!0,opacity:.9,value:t.overlay}},[s("v-row",{staticClass:"mb-6",attrs:{"no-gutters":""}},[s("v-col",{attrs:{sm:"12"}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t._v(" "),s("v-col",{staticClass:"mt-5"},[s("span",{staticClass:"white--text"},[t._v("\n                        Un momento por favor, estamos procesando su\n                        solicitud\n                    ")])])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=n.exports}}]);